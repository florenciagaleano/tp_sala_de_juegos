import{a as C,b as A,c as V,d as D,e as N,g as W}from"./chunk-CWGJGK5M.js";import{$ as y,G as s,H as x,K as p,L as l,N as a,O as r,P as u,Q as M,R as h,S as d,U as b,V as _,X as w,Xa as z,Y as O,Z as j,ea as P,fa as k,ga as S,pa as I,qa as E,ta as F,u as v,va as T,x as m,y as f}from"./chunk-E7ILVK6W.js";function B(t,o){if(t&1&&(a(0,"div",11)(1,"p"),b(2),r(),u(3,"div",12),r()),t&2){let n=d().$implicit;s(2),_(n.mensaje)}}function L(t,o){if(t&1&&(a(0,"div",13),u(1,"div",14),a(2,"p"),b(3),r(),u(4,"div",12),r()),t&2){let n=d().$implicit;s(3),_(n.mensaje)}}function Q(t,o){if(t&1&&(a(0,"div"),p(1,B,4,1,"div",9)(2,L,5,1,"div",10),r()),t&2){let n=o.$implicit,i=d(2);s(),l("ngIf",n.usuario===i.usuarioActual),s(),l("ngIf",n.usuario!==i.usuarioActual)}}function Z(t,o){if(t&1){let n=M();a(0,"div",2)(1,"div",3),p(2,Q,3,2,"div",4),r(),a(3,"div",5)(4,"div",6)(5,"input",7),j("ngModelChange",function(e){m(n);let c=d();return O(c.nuevoMensaje,e)||(c.nuevoMensaje=e),f(e)}),r(),a(6,"button",8),h("click",function(){m(n);let e=d();return f(e.enviarMensaje(e.nuevoMensaje))}),r()()()()}if(t&2){let n=d();s(2),l("ngForOf",n.mensajes),s(3),w("ngModel",n.nuevoMensaje)}}var Y=(()=>{let o=class o{constructor(i,e){this.authService=i,this.firestore=e,this.chat=!1,this.mensajes=[],this.nuevoMensaje="",this.usuarioActual=null}ngOnInit(){this.usuarioActual=this.authService.getCurrentUser(),this.getMensajes()}abrirChat(){this.chat=!this.chat}getMensajes(){let i=C(this.firestore,"mensajes"),e=A(i,V("fecha","asc")),c=W(e,{idField:"id"});this.sub=c.subscribe(g=>{this.mensajes=g,console.log(g)})}enviarMensaje(i){let e=C(this.firestore,"mensajes");D(e,{mensaje:i,usuario:this.usuarioActual,fecha:new Date}),this.nuevoMensaje="",this.getMensajes()}};o.\u0275fac=function(e){return new(e||o)(x(z),x(N))},o.\u0275cmp=v({type:o,selectors:[["app-chat"]],standalone:!0,features:[y],decls:2,vars:1,consts:[[1,"btn-chat",3,"click"],["class","chat-box",4,"ngIf"],[1,"chat-box"],[1,"message-box"],[4,"ngFor","ngForOf"],[1,"input-box"],[1,"write-reply"],["type","text","placeholder","Responder...",1,"inputText",3,"ngModelChange","ngModel"],[1,"send-button",3,"click"],["class","first-chat",4,"ngIf"],["class","second-chat",4,"ngIf"],[1,"first-chat"],[1,"arrow"],[1,"second-chat"],[1,"circle"]],template:function(e,c){e&1&&(a(0,"button",0),h("click",function(){return c.abrirChat()}),r(),p(1,Z,7,2,"div",1)),e&2&&(s(),l("ngIf",c.chat))},dependencies:[S,P,k,T,I,E,F],styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;text-decoration:none;list-style:none;box-sizing:border-box}.btn-chat[_ngcontent-%COMP%]{position:fixed;left:90%;bottom:5%;background-image:url("./media/chat-icon-4LVOBAQ5.png");background-size:contain;background-repeat:no-repeat;width:50px;height:50px;cursor:pointer;border-radius:90px;border:none}.chat-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:332px;height:434px;border-radius:10px;background-color:#ffffff96;padding:16px;z-index:9999999;position:fixed;border-color:#b00287;bottom:100px;right:54px;border-style:double;box-shadow:#0000001a 0 1px 6px,#0003 0 2px 24px}.message-box[_ngcontent-%COMP%]{height:316px;width:100%;padding-right:5px;overflow:auto}.first-chat[_ngcontent-%COMP%]{width:200px;float:right;background-color:#fd7ddb;padding:10px;margin:14px 0;border-radius:5px;color:#fff}.first-chat[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;overflow-wrap:break-word}.second-chat[_ngcontent-%COMP%]{display:inline-block}.second-chat[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;overflow-wrap:break-word;width:200px;float:left;background-color:#ecf1fb;padding:12px;margin:14px 0;border-radius:10px;color:#000}.second-chat[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{content:"";width:0px;height:0px;border-right:9px solid transparent;border-left:9px solid #ecf1fb;border-top:12px solid #ecf1fb;border-bottom:9px solid transparent;margin-left:40px;margin-top:-2%;display:inline-block}.input-box[_ngcontent-%COMP%]{position:absolute;font-size:12px;bottom:0;left:0;right:0;padding:0 15px 18px;border-top:1px solid lightgray;width:100%}.input-box[_ngcontent-%COMP%]   .write-reply[_ngcontent-%COMP%]{float:left}.input-box[_ngcontent-%COMP%]   .write-reply[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{border:none;outline:none;font-size:20px}.input-box[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{float:right;border:none;outline:none}.input-box[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background-color:transparent;cursor:pointer;outline:none}.send-button[_ngcontent-%COMP%]{position:fixed;background-image:url("./media/send-Z2Z47SW2.png");background-size:contain;background-repeat:no-repeat;width:25px;height:22px;cursor:pointer;border:none}']});let t=o;return t})();export{Y as a};
